{
  "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "parameters": { 
      "dashboardName": {
          "type": "string",
		  "metadata": {
				"description": "Name of the Dashboard"
			}
      },
	  "appInsightName": {
          "type": "string",
		  "metadata": {
				"description": "Name of the Application Insight"
			}
      }
  },
  "variables": {
		"apiVersion": "2015-08-01-preview",
		"location": "[resourceGroup().location]",
		"resourceGroupName": "[resourceGroup().name]"
  },
  "resources": [
      {      
      "name": "[parameters('dashboardName')]",
      "type": "Microsoft.Portal/dashboards",
      "location":"[variables('location')]",
      "apiVersion":"[variables('apiVersion')]",
      "tags": {
        "hidden-title": "[parameters('dashboardName')]"
      },
      "properties": {
        "lenses": {
          "0": {
            "order": 0,
            "parts": {
              "0": {
                "position": {
                  "x": 6,
                  "y": 0,
                  "rowSpan": 4,
                  "colSpan": 6
                },
                "metadata": {
                  "inputs": [],
                  "type": "Extension/HubsExtension/StartboardPartInstance/Browse",
                  "viewState": {
                    "content": {
                      "selectableData": {
                        "activatedItems": [],
                        "selectedItems": []
                      }
                    }
                  }
                }
              },
              "1": {
                "position": {
                  "x": 12,
                  "y": 1,
                  "rowSpan": 1,
                  "colSpan": 2
                },
                "metadata": {
                  "inputs": [],
                  "type": "Extension/HubsExtension/StartboardPartInstance/FeedbackTileStart"
                }
              },
              "2": {
                "position": {
                  "x": 12,
                  "y": 0,
                  "rowSpan": 1,
                  "colSpan": 2
                },
                "metadata": {
                  "inputs": [],
                  "type": "Extension/HubsExtension/StartboardPartInstance/WhatsNewTileStart"
                }
              },
              "3": {
                "position": {
                  "x": 6,
                  "y": 4,
                  "rowSpan": 4,
                  "colSpan": 6
                },
                "metadata": {
                  "inputs": [
                    {
                      "name": "subscriptionId",
                      "value": "[subscription().subscriptionId]"
                    }
                  ],
                  "type": "Extension/Microsoft_Azure_Billing/Blade/CreditSubscriptionDetailBlade/Lens/CostsLens/PartInstance/b_CreditSubscriptionDetailBlade_part3"
                }
              },
              "4": {
                "position": {
                  "x": 12,
                  "y": 2,
                  "rowSpan": 1,
                  "colSpan": 1
                },
                "metadata": {
                  "inputs": [],
                  "type": "Extension/HubsExtension/StartboardPartInstance/AzurePortalTileStart"
                }
              },
              "5": {
                "position": {
                  "x": 0,
                  "y": 4,
                  "rowSpan": 4,
                  "colSpan": 6
                },
                "metadata": {
                  "inputs": [
                    {
                      "name": "subscriptionId",
                      "value": "[subscription().subscriptionId]"
                    }
                  ],
                  "type": "Extension/Microsoft_Azure_Billing/Blade/CreditSubscriptionDetailBlade/Lens/CostsLens/PartInstance/BurnRateCredit"
                }
              },
              "6": {
                "position": {
                  "x": 0,
                  "y": 0,
                  "rowSpan": 4,
                  "colSpan": 6
                },
                "metadata": {
                  "inputs": [
                    {
                      "name": "ComponentId",
                      "value": {
                        "SubscriptionId": "[subscription().subscriptionId]",
                        "ResourceGroup": "[variables('resourceGroupName')]",
                        "Name": "[parameters('appInsightName')]"
                      }
                    },
                    {
                      "name": "Query",
                      "value": "//all logs\ntraces | \nunion customEvents | \nunion pageViews |\nunion requests |\nunion dependencies |\nunion exceptions |\nunion availabilityResults |\nunion customMetrics |\nunion performanceCounters |\nunion browserTimings | sort by timestamp desc"
                    },
                    {
                      "name": "Version",
                      "value": "1.0"
                    },
                    {
                      "name": "DashboardId",
                      "value": "/subscriptions/91e72c43-6b00-4fac-8ace-aa0b66d816c5/resourceGroups/dashboards/providers/Microsoft.Portal/dashboards/3d7b2c09-0e6c-4969-b020-2932d63ab2e7"
                    },
                    {
                      "name": "PartId",
                      "value": "44060164-7deb-4aca-b859-12f41146fd42"
                    },
                    {
                      "name": "PartTitle",
                      "value": "Analytics"
                    },
                    {
                      "name": "PartSubTitle",
                      "value": "AllEvents"
                    },
                    {
                      "name": "resourceTypeMode",
                      "value": "components"
                    }
                  ],
                  "type": "Extension/AppInsightsExtension/PartType/AnalyticsGridPart",
                  "asset": {
                    "idInputName": "ComponentId",
                    "type": "ApplicationInsights"
                  }
                }
              }
            }
          }
        },
        "metadata": {
          "model": {
            "timeRange": {
              "value": {
                "relative": {
                  "duration": 1,
                  "timeUnit": 3
                }
              },
              "type": "MsPortalFx.Composition.Configuration.ValueTypes.TimeRange"
            }
          }
        }
      }
    }      
  ],
  "outputs": {
  }
}